mkfs.ext4 -L EXT_GRP_USR /dev/nvme1n1

mkfs.xfs -f -L XFS_GRP_USR /dev/nvme2n1

blkid /dev/nvme1n1

blkid /dev/nvme1n1
/dev/nvme1n1: LABEL="EXT_GRP_USR" UUID="1e2d7064-8d5f-4aeb-b343-23c771416196" TYPE="ext4"

blkid /dev/nvme2n1
/dev/nvme2n1: LABEL="XFS_GRP_USR" UUID="034dece5-2c5f-497d-8d75-bb2a22d13695" TYPE="xfs"

vi /etc/fstab
UUID=1e2d7064-8d5f-4aeb-b343-23c771416196 /data1 ext4 defaults,nofail  0  2
UUID=034dece5-2c5f-497d-8d75-bb2a22d13695 /data2 xfs defaults,nofail  0  2


dnf install -y quota

vi /etc/fstab
UUID=1e2d7064-8d5f-4aeb-b343-23c771416196 /data1 ext4 defaults,nofail,usrquota,grpquota  0  2
UUID=034dece5-2c5f-497d-8d75-bb2a22d13695 /data2 xfs defaults,nofail,usrquota,grpquota  0  2

systemctl reboot

findmnt -t ext4
TARGET SOURCE       FSTYPE OPTIONS
/data1 /dev/nvme1n1 ext4   rw,relatime,seclabel,quota,usrquota,grpquota

quotacheck --create-files --user --group /dev/nvme1n1

ls -l /data1
total 32
-rw-------. 1 root root  6144 Jan 21 13:48 aquota.group
-rw-------. 1 root root  6144 Jan 21 13:48 aquota.user
drwx------. 2 root root 16384 Jan 21 13:28 lost+found

quotaon /data1

findmnt -t xfs
TARGET   SOURCE         FSTYPE OPTIONS
/data2 /dev/nvme2n1   xfs    rw,relatime,seclabel,attr2,inode64,logbufs=8,logbsize=32k,sunit=8,swidth=8,usrquota,grpquota

mkdir /data2/ec2-user
chown ec2-user:ec2-user /data2/ec2-user

fallocate --length 10G /data2/ec2-user/10GB-file

cd /data2/ec2-user/
du -sh *
10G	10GB-file

edquota --user ec2-user

Disk quotas for user ec2-user (uid 1000):
  Filesystem                   blocks       soft       hard     inodes     soft     hard
  /dev/nvme2n1               10485760          0          0          2        0        0
  /dev/nvme1n1                      0          0          0          0        0        0

# Get into insert mode
Filesystem                   blocks       soft       hard     inodes     soft     hard
  /dev/nvme2n1               10485760       15G        20G          2        0        0
  /dev/nvme1n1                      0          0          0          0        0        0

fallocate --length 25G /data2/ec2-user/10GB-file
fallocate: fallocate failed: Disk quota exceeded

[ec2-user@httpdsrv ec2-user]$ fallocate --length 10G /data2/ec2-user/10GB-file
[ec2-user@httpdsrv ec2-user]$ fallocate --length 9G /data2/ec2-user/9GB-file
[ec2-user@httpdsrv ec2-user]$ fallocate --length 1G /data2/ec2-user/1GB-file
fallocate: fallocate failed: Disk quota exceeded

quota --user ec2-user
Disk quotas for user ec2-user (uid 1000): 
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
   /dev/nvme2n1 19922944* 15728640 20971520   6days       4       0       0    

cd /data2/ec2-user/

du -sh *

10G	10GB-file
0	1GB-file
9.0G	9GB-file

sudo xfs_quota -x -c 'limit bsoft=100m bhard=500m john' /mnt/

# Setting XFS_QUOTA

/dev/nvme2n1 xfs   /data2                                                                  
/dev/nvme1n1 ext4 /data1

mkfs.ext4 -L EXT_USER_GROUP /dev/nvme1n1
mkfs.xfs -L XFS_USR_GRP /dev/nvme2n1

uquota, gquota and pquota

blkid /dev/nvme1n1
/dev/nvme1n1: LABEL="EXT_USER_GROUP" UUID="187fd7f3-2297-4b96-888f-a35a22723af7" TYPE="ext4"

blkid /dev/nvme2n1
/dev/nvme2n1: LABEL="XFS_USR_GRP" UUID="47777e72-6724-4376-8a9f-9916d8342339" TYPE="xfs"

vi /etc/fstab
UUID=187fd7f3-2297-4b96-888f-a35a22723af7 /data1 ext4 defaults,uquota,gquota,grpquota 0 2
UUID=47777e72-6724-4376-8a9f-9916d8342339 /data2 xfs defaults,uquota,gquota,grpquota 0 2


